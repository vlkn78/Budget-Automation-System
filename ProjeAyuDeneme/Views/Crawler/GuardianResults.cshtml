@model List<projeAyuDeneme.Controllers.CrawlResultViewModel>

@{
    // Başlığı değiştir
    ViewData["Title"] = "The Guardian 'Türkiye' Haberleri (API)";
}

<div class="card mb-4">
    <div class="card-header">
        <h3 class="card-title">
            <i class="fab fa-guardian"></i> @ViewData["Title"] (Son 10 Haber)
        </h3>
    </div>
    <div class="card-body p-0">
        @if (Model == null || !Model.Any() || Model.First().Title.Contains("HATA"))
        {
            <div class="p-4">
                <div class="alert alert-warning" role="alert">
                    The Guardian API'da 'Türkiye' ile ilgili bir haber bulunamadı veya API hatası oluştu.
                    @if (Model != null && Model.Any() && Model.First().Title.Contains("HATA"))
                    {
                        <hr>
                        <p class="mb-0"><strong>Hata Detayı:</strong> @Model.First().Summary</p>
                    }
                </div>
            </div>
        }
        else
        {
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th style="width: 10px">#</th>
                        <th style="width: 120px">Tarih</th>
                        <th>Başlık</th>
                        <th>Özet</th>
                    </tr>
                </thead>
                @{
                    int counter = 1;
                }
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr class="align-middle">
                            <td>@(counter++).</td>
                     
                            <td><span class="badge text-bg-warning">@item.Date</span></td>
                            <td>
                                <a href="@item.Url" target="_blank" style="text-decoration: none;">
                                    <strong>@item.Title</strong>
                                </a>
                            </td>
                            <td>
                                @{
                                    var summary = item.Summary.Length > 250 ? item.Summary.Substring(0, 250) + "..." : item.Summary;
                                }
                                <small>@summary</small>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        }
    </div>
</div>